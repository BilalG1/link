(function(e){function n(n){for(var r,o,c=n[0],s=n[1],u=n[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(n);while(p.length)p.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,c=1;c<t.length;c++){var s=t[c];0!==i[s]&&(r=!1)}r&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},i={app:0},a=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=s;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"26a3":function(e,n,t){},"39a4":function(e,n,t){"use strict";t("8396")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("7a23"),i=t("6c02");function a(e,n,t,i,a,o){var c=Object(r["x"])("router-view");return Object(r["q"])(),Object(r["d"])(c)}var o={name:"App"},c=(t("d822"),t("6b0d")),s=t.n(c);const u=s()(o,[["render",a]]);var l=u,d=(t("9911"),{key:0}),p={key:1};function f(e,n,t,i,a,o){return a.error?(Object(r["q"])(),Object(r["f"])("div",p,Object(r["z"])(a.error),1)):(Object(r["q"])(),Object(r["f"])("div",d," Checking link status of '"+Object(r["z"])(t.link)+"'... ",1))}t("d3b7"),t("ac1f"),t("5319"),t("3ca3"),t("ddb0"),t("2b3d"),t("9861"),t("2ca0");var b={props:["link"],data:function(){return{error:""}},mounted:function(){var e=this,n="https://link.bg-cloud.workers.dev/api/link/".concat(this.link);fetch(n).then((function(e){return e.text()})).then((function(n){console.log(n),"No link found with given key"===n?e.error=n:e.isValidHttpUrl(n)?window.location.replace(n):e.error="The forwarding string is not a valid url. data= "+n}))},methods:{isValidHttpUrl:function(e){var n;try{n=new URL(e)}catch(t){return!1}return n.origin.startsWith("http://")||n.origin.startsWith("https://")}}};const h=s()(b,[["render",f]]);var O=h,w={key:0,class:"password-section"},j=Object(r["g"])("div",{class:"password-label"}," Password ",-1),k={key:0,class:"password-error"};function v(e,n,t,i,a,o){var c=Object(r["x"])("Links"),s=Object(r["x"])("router-view");return Object(r["q"])(),Object(r["f"])(r["a"],null,[a.loggedIn?(Object(r["q"])(),Object(r["d"])(c,{key:1})):(Object(r["q"])(),Object(r["f"])("div",w,[j,Object(r["D"])(Object(r["g"])("input",{type:"password",class:"password-input","onUpdate:modelValue":n[0]||(n[0]=function(e){return a.password=e}),placeholder:"abc123",onKeyup:n[1]||(n[1]=Object(r["E"])((function(){return o.checkPassword&&o.checkPassword.apply(o,arguments)}),["enter"]))},null,544),[[r["B"],a.password]]),a.passwordError?(Object(r["q"])(),Object(r["f"])("div",k,Object(r["z"])(a.passwordError),1)):Object(r["e"])("",!0),Object(r["g"])("div",null,[Object(r["g"])("button",{class:"password-submit",onClick:n[2]||(n[2]=function(){return o.checkPassword&&o.checkPassword.apply(o,arguments)})}," Submit ")])])),Object(r["h"])(s)],64)}var m=t("1da1"),g=(t("96cf"),t("b0c0"),function(e){return Object(r["t"])("data-v-725eaf2e"),e=e(),Object(r["r"])(),e}),y=g((function(){return Object(r["g"])("div",{class:"links-header"}," Links ",-1)})),P={class:"pair-list-wrapper"},L={class:"pair-name"},E={class:"pair-link"},x=["onClick"],q={class:"new-pair"},A=g((function(){return Object(r["g"])("div",{class:"new-head"}," Add new pair: ",-1)})),U={class:"new-name"},N=g((function(){return Object(r["g"])("span",{class:"label-name"}," Name ",-1)})),S={class:"new-link"},_=g((function(){return Object(r["g"])("span",{class:"label-link"}," Link ",-1)})),V={class:"new-error"};function z(e,n,t,i,a,o){return Object(r["q"])(),Object(r["f"])("div",null,[y,Object(r["g"])("div",P,[(Object(r["q"])(!0),Object(r["f"])(r["a"],null,Object(r["w"])(a.nameLinkPairArray,(function(e){return Object(r["q"])(),Object(r["f"])("div",{key:e.name,class:"list-pair"},[Object(r["g"])("span",L,Object(r["z"])(e.name+")"),1),Object(r["g"])("span",E,Object(r["z"])(e.link),1),Object(r["g"])("button",{onClick:function(){return o.deletePair(e.name)},class:"pair-delete"}," delete ",8,x)])})),128))]),Object(r["g"])("div",q,[A,Object(r["g"])("div",U,[N,Object(r["D"])(Object(r["g"])("input",{class:"input-name","onUpdate:modelValue":n[0]||(n[0]=function(e){return a.newName=e})},null,512),[[r["B"],a.newName]])]),Object(r["g"])("div",S,[_,Object(r["D"])(Object(r["g"])("input",{class:"input-link","onUpdate:modelValue":n[1]||(n[1]=function(e){return a.newLink=e})},null,512),[[r["B"],a.newLink]])]),Object(r["g"])("button",{onClick:n[2]||(n[2]=function(){return o.addPair&&o.addPair.apply(o,arguments)}),class:"submit-new-pair"}," Add "),Object(r["g"])("div",V,Object(r["z"])(a.newError),1)])])}t("4de4"),t("e9c4");var C="https://link.bg-cloud.workers.dev/api/",H={data:function(){return{nameLinkPairArray:[],newName:"",newLink:"",newError:""}},mounted:function(){var e=this;fetch(C+"allkeysandlinks").then((function(e){return e.json()})).then((function(n){return e.nameLinkPairArray=n}))},methods:{deletePair:function(e){var n=C+"link/"+e,t={method:"DELETE"};fetch(n,t),this.nameLinkPairArray=this.nameLinkPairArray.filter((function(n){return n.name!==e}))},addPair:function(){var e=this.newName,n=this.newLink;if(this.newError="",!e||!n)return console.log("err, empty name or link in add"),void(this.newError="invalid submission, name and link must be populated");if(n=this.isValidHttpUrl(this.newLink),!n)return console.log("err, populated name and link, but invalid link"),void(this.newError="link should be of form https://www.example.com");var t=C+"link/"+e,r={method:"POST",body:JSON.stringify(n)};fetch(t,r),this.nameLinkPairArray.push({name:e,link:n}),this.newName="",this.newLink=""},isValidHttpUrl:function(e){var n;try{n=new URL(e)}catch(t){return!1}return!(!n.origin.startsWith("http://")&&!n.origin.startsWith("https://"))&&n.origin}}};t("ec46");const I=s()(H,[["render",z],["__scopeId","data-v-725eaf2e"]]);var T=I,D={name:"Home",components:{Links:T},data:function(){return{loggedIn:!1,password:"",passwordError:""}},methods:{checkPassword:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t="https://link.bg-cloud.workers.dev/api/auth/"+e.password,fetch(t).then((function(e){return e.json()})).then((function(n){n?e.loggedIn=!0:e.passwordError="Incorrect password"}));case 2:case"end":return n.stop()}}),n)})))()}}};t("39a4");const M=s()(D,[["render",v]]);var R=M,W=[{path:"/",component:R},{path:"/:link",props:!0,component:O}],B=Object(i["a"])({history:Object(i["b"])(),routes:W});Object(r["c"])(l).use(B).mount("#app")},8396:function(e,n,t){},d822:function(e,n,t){"use strict";t("f295")},ec46:function(e,n,t){"use strict";t("26a3")},f295:function(e,n,t){}});
//# sourceMappingURL=app.1cd3224c.js.map